# ssl
# 对称加密和非对称加密的区别
- 对称加密和非对称加密的过程不同
对称加密： 加密和解密的过程使用的是同一个密钥，
非对称加密： 加密和解密过程使用的是两个密钥。用公钥进行加密，用私钥进行解密
- 解密和加密速度不同
对称加密和解密的速度比较快，适合速度较长时使用
非对称加密加密和解密的速度比较慢
- 对称加密和非对称加密安全性不同
对称加密的密钥在传输过程中可能被截取。安全性较低
非对称加密中的私钥是基于不同算法推出的随机字符串。公钥是私钥通过一定的加密算法推导出来的。这个过程是单向的，私钥可以推导出公钥，但是公钥不能推导出私钥


## https 传输过程
https = http + tls || http + ssl
https 整个通信的过程可以分为 证书验证和数据传输两部分。数据传输又分为非对称加密和对称加密两阶段

1. 客户端请求 https 的地址，连接到服务端到 443 端口。443 是 https 的默认端口
2. 采用 https 协议的服务端必须要用一套 ca 证书， 证书是需要申请的，由专门的 ca 机构通过非常严格的审核之后，颁发的电子证书，电子证书。电子证书本身也会附带一个电子签名，用来验证证书的完整性和真实性，防止证书被篡改。颁发证书的同时会给一个公钥和私钥。私钥由服务端自己保存。公钥放在证书信息中。可以是公开的
3. 服务器响应客户端的请求，将证书传递给客户端，证书包含 共钥、有效期、颁发机构、公司信息等大量信息
4. 客户端会对证书进行解析，并对其进行验证，如果证书不是可信机构颁发、过期、证书中的域名和实际域名不一样，浏览器都会给访问者一个警告。由其选择是否需要继续通信。如果证书没有问题，浏览器就会从服务器证书中取出服务器的公钥 a 。然后客户端还会生成一个随机字符串，利用公钥 a 对字符串进行加密。
5. 客户端吧加密后的随机字符串发送给服务器。做为后面对称加密的密钥。
6. 服务器收到随机码后，会用私钥进行解密。接下来就会使用对称加密进行通信
7. 服务器用 密钥（上面的随机字符串）对数据进行加密。将数据传输给客户端，客户端用相同的密钥对数据进行解密。

## TLS 过程发生了什么
TLS 和 SSL  协议都可以为通信双方提供识别和认证通道，SSL 已经逐渐被 TLS 所替代。所以就先来介绍下 TLS 握手过程。目的是建立安全连接
1. 确定双方通信使用的 TLS 版本
2. 确定双方需要使用的密码组合
3. 客户端验证服务端的公钥和电子证书验证服务端的身份
4. 生成会话密钥，用于对称加密

### TLS 握手详细过程
1. "client hello" 客户端发送一个 “client hello" 消息像服务端发送请求，同时携带 支持的 TLS 版本、密码组合、随机字符串
2. "sever hello" 服务端发送 "server hello" 对客户端进行回应。包含了数字证书 选择的 TLS 版本，密码组合和 服务器的随机字符串
3. 客户端对服务端返回的数字证书进行验证，
4. “premaster secrect” 客户端向服务端发送一个利用公钥加过密的随机字符串
5. 服务端利用私钥解密 "premaster secret"
6. 生成共享密钥，客户端均用 client random server random premaster-secret 并用相同的算法生成相同的共享密钥 key
7. 客户端发送经过共享密钥加密的 "finish" 信息
8. 服务端发送经过共享密钥加密的 "finish" 信息
9. 达成安全通信，握手完成